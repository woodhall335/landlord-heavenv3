# =============================================================================
# LANDLORD HEAVEN - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to git!
# =============================================================================

# =============================================================================
# APPLICATION
# =============================================================================
NEXT_PUBLIC_APP_NAME="Landlord Heaven"
NEXT_PUBLIC_APP_URL="http://localhost:5000"
NEXT_PUBLIC_SITE_URL="http://localhost:5000"
NODE_ENV="development"

# =============================================================================
# SUPABASE (Database + Authentication)
# =============================================================================
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api

# Server-side (used in API routes and server components)
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# Browser-side (used in client components - must have NEXT_PUBLIC_ prefix)
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# =============================================================================
# OPENAI (Conversational Wizard + Document Generation)
# =============================================================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY="sk-proj-..."
OPENAI_ORG_ID="org-..."

# =============================================================================
# ANTHROPIC (Optional - Claude for specific features)
# =============================================================================
# Get from: https://console.anthropic.com/settings/keys
# Only needed if using Claude-specific features
ANTHROPIC_API_KEY="sk-ant-..."

# =============================================================================
# STRIPE (Payments + Subscriptions)
# =============================================================================
# Get from: https://dashboard.stripe.com/test/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."
STRIPE_SECRET_KEY="sk_test_..."

# Webhook secret (get after deploying, from: https://dashboard.stripe.com/test/webhooks)
STRIPE_WEBHOOK_SECRET="whsec_..."

# =============================================================================
# STRIPE PRODUCT PRICE IDs (One-Time Products)
# =============================================================================
# Create these products in Stripe dashboard, then paste the price IDs here

# Product 1: Notice Only (£29.99)
STRIPE_PRICE_ID_NOTICE_ONLY="price_..."

# Product 2: Complete Eviction Pack (£149.99)
STRIPE_PRICE_ID_EVICTION_PACK="price_..."

# Product 3: Money Claim Online (£179.99)
STRIPE_PRICE_ID_MONEY_CLAIM="price_..."

# Product 4: Standard AST (£9.99)
STRIPE_PRICE_ID_STANDARD_AST="price_..."

# Product 5: Premium AST (£14.99)
STRIPE_PRICE_ID_PREMIUM_AST="price_..."

# =============================================================================
# STRIPE SUBSCRIPTION PRICE IDs (HMO Pro Tiers with 7-day trial)
# =============================================================================
# Create these as MONTHLY subscriptions with 7-day free trial

# HMO Pro Tier 1: 1-5 properties (£19.99/month)
STRIPE_PRICE_ID_HMO_PRO_1_5="price_..."

# HMO Pro Tier 2: 6-10 properties (£24.99/month)
STRIPE_PRICE_ID_HMO_PRO_6_10="price_..."

# HMO Pro Tier 3: 11-15 properties (£29.99/month)
STRIPE_PRICE_ID_HMO_PRO_11_15="price_..."

# HMO Pro Tier 4: 16-20 properties (£34.99/month)
STRIPE_PRICE_ID_HMO_PRO_16_20="price_..."

# =============================================================================
# RESEND (Email Service)
# =============================================================================
# Get from: https://resend.com/api-keys
RESEND_API_KEY="re_..."
RESEND_FROM_EMAIL="Landlord Heaven <no-reply@landlordheaven.co.uk>"
RESEND_REPLY_TO_EMAIL="support@landlordheaven.co.uk"

# =============================================================================
# AI MODEL CONFIGURATION
# =============================================================================
# Specify which models to use for each stage of the AI pipeline
AI_MODEL_WIZARD="gpt-4o-mini"                   # Conversational fact-finding
AI_MODEL_DECISION="gpt-4o-mini"                 # Legal decision engine
AI_MODEL_GENERATION="gpt-4o-mini"               # Document generation
AI_MODEL_QA="gpt-4o-mini"                       # Quality validation (>85 score)
AI_MODEL_CONSISTENCY="gpt-4o-mini"              # LLM consistency checks

# AI Temperature settings
AI_TEMPERATURE_CONVERSATIONAL="0.7"
AI_TEMPERATURE_PRECISE="0.3"

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# HMO Pro subscription feature
ENABLE_HMO_PRO="true"
NEXT_PUBLIC_ENABLE_HMO_PRO="true"

# Jurisdiction features
NEXT_PUBLIC_ENABLE_MONEY_CLAIMS="true"
NEXT_PUBLIC_ENABLE_SCOTLAND="true"
NEXT_PUBLIC_ENABLE_NORTHERN_IRELAND="true"

# AI feature toggles
ENABLE_LLM_CONSISTENCY_CHECK="false"           # Enable LLM-based fact consistency checks
ENABLE_VISION_OCR="true"                       # Enable vision-based OCR for evidence (recommended)
ENABLE_SMART_REVIEW="true"                     # Enable smart evidence review (recommended for complete_pack)

# Disable specific AI features (set to "true" to disable)
DISABLE_WITNESS_STATEMENT_AI="false"
DISABLE_COMPLIANCE_AUDIT_AI="false"
DISABLE_RISK_ASSESSMENT_AI="false"

# =============================================================================
# SMART EVIDENCE REVIEW (Optional)
# =============================================================================
# Configure limits for AI-powered evidence analysis
SMART_REVIEW_MAX_FILES_PER_RUN="10"
SMART_REVIEW_MAX_PAGES_PER_PDF="20"
SMART_REVIEW_MAX_TOTAL_PAGES_PER_RUN="50"
SMART_REVIEW_MAX_TEXT_CHARS="50000"
SMART_REVIEW_MAX_VISION_PAGES="5"
SMART_REVIEW_TIMEOUT_MS="30000"
SMART_REVIEW_MAX_IMAGE_DIMENSION="2048"
SMART_REVIEW_THROTTLE_MS="1000"

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WIZARD="50 per 15 minutes"
RATE_LIMIT_GENERATION="10 per hour"
RATE_LIMIT_API="100 per 15 minutes"

# =============================================================================
# SECURITY & ACCESS CONTROL
# =============================================================================
# Random string for securing cron jobs (generate with: openssl rand -hex 32)
CRON_SECRET="your-random-secret-key-here"

# Admin user IDs (comma-separated UUIDs from Supabase auth.users)
# Server-side admin check
ADMIN_USER_IDS="uuid1,uuid2,uuid3"
# Client-side admin check (for UI elements)
NEXT_PUBLIC_ADMIN_USER_IDS="uuid1,uuid2,uuid3"

# CORS allowed origins (comma-separated, production only)
# Leave empty in development to allow localhost
# In production: "https://landlordheaven.co.uk,https://www.landlordheaven.co.uk"
ALLOWED_ORIGINS=""

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
# Log level: "debug" | "info" | "warn" | "error"
LOG_LEVEL="info"

# Debug flags (set to "1" to enable)
NOTICE_ONLY_DEBUG="0"
NOTICE_ONLY_INLINE_GUIDANCE="0"
DEBUG_EVIDENCE="false"

# Development tools
NEXT_PUBLIC_DEBUG_MODE="false"
NEXT_PUBLIC_SHOW_DEV_TOOLS="false"

# =============================================================================
# MONITORING & ANALYTICS (Optional)
# =============================================================================
# Google Analytics 4
NEXT_PUBLIC_GA_MEASUREMENT_ID="G-XXXXXXXXXX"

# Facebook Pixel (for retargeting and conversion tracking)
# Get from: https://business.facebook.com/events_manager
NEXT_PUBLIC_FB_PIXEL_ID=""

# Google Ads (for conversion tracking, separate from GA4)
# Get from: https://ads.google.com/aw/conversions
NEXT_PUBLIC_GOOGLE_ADS_ID=""

# Sentry (Error tracking)
SENTRY_DSN="https://...@sentry.io/..."

# =============================================================================
# TESTING (Optional - for integration tests)
# =============================================================================
SUPABASE_URL_TEST="http://localhost:54321"
SUPABASE_SERVICE_ROLE_KEY_TEST="your-test-service-role-key"
TEST_BASE_URL="http://localhost:5000"

# =============================================================================
# PRODUCTION CHECKLIST
# =============================================================================
# Before deploying to production, ensure you have:
#
# 1. SUPABASE
#    [ ] Created production Supabase project
#    [ ] Run all migrations (supabase/migrations/*.sql)
#    [ ] Created 'documents' storage bucket (private, 10MB limit)
#    [ ] Set production URL and keys
#
# 2. STRIPE
#    [ ] Created production Stripe account
#    [ ] Created all 5 one-time products with correct prices
#    [ ] Created all 4 subscription products with 7-day trials
#    [ ] Set up webhook endpoint and copied secret
#    [ ] Switched to live API keys (pk_live_..., sk_live_...)
#
# 3. EMAIL
#    [ ] Verified domain in Resend (landlordheaven.co.uk)
#    [ ] Set production API key
#    [ ] Tested email delivery
#
# 4. SECURITY
#    [ ] Generated strong CRON_SECRET
#    [ ] Set ADMIN_USER_IDS to actual admin UUIDs
#    [ ] Set ALLOWED_ORIGINS for production domains
#    [ ] Disabled debug flags
#
# 5. MONITORING & ANALYTICS
#    [ ] Set up Google Analytics 4
#    [ ] Set up Facebook Pixel for retargeting
#    [ ] Set up Google Ads conversion tracking
#    [ ] Configured Sentry for error tracking
#
# =============================================================================
