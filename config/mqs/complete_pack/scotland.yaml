# config/mqs/complete_pack/scotland.yaml

__meta:
  version: "1.0.0"
  effective_from: "2025-11-01"
  last_updated: "2025-12-03"
  legal_review_date: "2025-10-30"
  jurisdiction: "scotland"
  product: "complete_pack"

id: complete_pack_scotland_v1
product: complete_pack
jurisdiction: scotland
version: "1.0.0"

questions:
  # 1. Case overview
  - id: case_overview
    section: Case Overview
    question: "Briefly describe what has gone wrong with this tenancy"
    inputType: textarea
    helperText: "Summarise the issue for the Notice to Leave and tribunal application. Include key dates, arrears position, and any behaviour concerns."
    validation:
      required: true
    suggestion_prompt: >
      Turn the landlord's description into a clear, factual summary suitable for a tribunal application.
      Keep dates, amounts, and events neutral.
    maps_to:
      - case_overview
      - case_summary
      - particulars_of_claim
    conditions: []

  # 2. Landlord / claimant details
  - id: landlord_details
    section: Landlord Details
    question: "Your details"
    inputType: group
    helperText: "These appear on the Notice to Leave and tribunal forms. Include all joint landlords."
    fields:
      - id: landlord_name
        label: "Main landlord full name"
        inputType: text
        validation:
          required: true
        width: full
      - id: landlord_2_name
        label: "Second landlord (if any)"
        inputType: text
        width: full
      - id: landlord_registration_number
        label: "Landlord registration number (if registered)"
        inputType: text
        width: half
      - id: landlord_email
        label: "Email address"
        inputType: email
        validation:
          required: true
        width: half
      - id: landlord_phone
        label: "Phone number"
        inputType: tel
        validation:
          required: true
        width: half
      - id: landlord_address_line1
        label: "Address line 1"
        inputType: text
        validation:
          required: true
        width: full
      - id: landlord_address_line2
        label: "Address line 2 (optional)"
        inputType: text
        width: full
      - id: landlord_city
        label: "Town/City"
        inputType: text
        validation:
          required: true
        width: half
      - id: landlord_postcode
        label: "Postcode"
        inputType: text
        validation:
          required: true
        width: half
      - id: claimant_reference
        label: "Internal reference (optional)"
        inputType: text
        placeholder: "e.g. Flat 2A / Smith / Feb 2025"
        width: half
    suggestion_prompt: >
      Check that landlord names and addresses match the tenancy agreement and any prior correspondence to avoid service issues.
    maps_to:
      - landlord_name
      - landlord_full_name
      - landlord_2_name
      - landlord_registration_number
      - landlord_email
      - landlord_phone
      - landlord_address_line1
      - landlord_address_line2
      - landlord_city
      - landlord_postcode
      - claimant_reference
    conditions: []

  # 3. Tenant / respondent details
  - id: tenant_details
    section: Tenant Details
    question: "Who are the tenants or respondents?"
    inputType: group
    helperText: "List all tenants so the Notice to Leave and tribunal claim are correctly addressed."
    fields:
      - id: tenant_1_name
        label: "Tenant 1 full name"
        inputType: text
        validation:
          required: true
        width: full
      - id: tenant_1_email
        label: "Tenant 1 email (optional)"
        inputType: email
        width: half
      - id: tenant_1_phone
        label: "Tenant 1 phone (optional)"
        inputType: tel
        width: half
      - id: tenant_2_name
        label: "Tenant 2 full name (if joint)"
        inputType: text
        width: full
      - id: tenant_2_email
        label: "Tenant 2 email (optional)"
        inputType: email
        width: half
      - id: tenant_2_phone
        label: "Tenant 2 phone (optional)"
        inputType: tel
        width: half
      - id: occupants_in_property
        label: "Who is currently living in the property?"
        inputType: textarea
        helperText: "List all adults and children if known."
        width: full
    suggestion_prompt: >
      Match names to the tenancy agreement. If other adults live there, note them in occupants.
    maps_to:
      - tenant1_name
      - tenant1_email
      - tenant1_phone
      - tenant2_name
      - tenant2_email
      - tenant2_phone
      - occupants_in_property
    conditions: []

  # 4. Property details
  - id: property_details
    section: Property
    question: "Rental property address"
    inputType: group
    helperText: "Full address of the let property."
    fields:
      - id: property_address_line1
        label: "Address line 1"
        inputType: text
        validation:
          required: true
        width: full
      - id: property_address_line2
        label: "Address line 2 (optional)"
        inputType: text
        width: full
      - id: property_city
        label: "Town/City"
        inputType: text
        validation:
          required: true
        width: half
      - id: property_postcode
        label: "Postcode"
        inputType: text
        validation:
          required: true
        width: half
      - id: property_type
        label: "Property type"
        inputType: select
        options:
          - flat_apartment
          - house
          - HMO
          - other
        width: half
    maps_to:
      - property_address_line1
      - property_address_line2
      - property_city
      - property_postcode
      - property_type
    conditions: []

  # 5. Tenancy details
  - id: tenancy_details
    section: Tenancy
    question: "Tenancy details"
    inputType: group
    helperText: "Key tenancy facts for the Notice to Leave and Form E."
    fields:
      - id: tenancy_type
        label: "What type of tenancy is this?"
        inputType: select
        options:
          - Private Residential Tenancy (PRT)
          - Assured Tenancy
          - Short Assured Tenancy
          - Other / unsure
        validation:
          required: true
        width: full
      - id: tenancy_start_date
        label: "Tenancy start date"
        inputType: date
        validation:
          required: true
        width: half
      - id: tenancy_end_date
        label: "End date (if tenancy already ended)"
        inputType: date
        width: half
      - id: rent_amount
        label: "Rent amount"
        inputType: currency
        validation:
          required: true
        width: half
      - id: rent_frequency
        label: "Rent payment frequency"
        inputType: select
        options:
          - weekly
          - fortnightly
          - monthly
          - quarterly
          - yearly
        validation:
          required: true
        width: half
      - id: rent_due_day
        label: "Usual rent due day"
        inputType: number
        helperText: "e.g. 1 for 1st of the month"
        width: half
      - id: rent_payment_method
        label: "How is rent usually paid?"
        inputType: select
        options:
          - bank_transfer
          - standing_order
          - cash
          - other
        width: half
    suggestion_prompt: >
      Confirm the tenancy type and rent terms against the written agreement and any variations.
    maps_to:
      - tenancy_type
      - tenancy_start_date
      - tenancy_end_date
      - rent_amount
      - rent_frequency
      - rent_due_day
      - rent_payment_method
    conditions: []

  # 6. Rent arrears schedule
  - id: arrears_status
    section: Rent Arrears
    question: "Is the tenant in rent arrears?"
    inputType: yes_no
    validation:
      required: true
    maps_to:
      - has_arrears
      - rent_arrears_has_arrears
    conditions: []

  - id: arrears_details
    section: Rent Arrears
    question: "Rent arrears details"
    inputType: group
    dependsOn:
      questionId: arrears_status
      value: "Yes"
    helperText: "Provide totals and a short schedule so we can build the arrears statement."
    fields:
      - id: arrears_total
        label: "Total arrears outstanding"
        inputType: currency
        validation:
          required: true
        width: half
      - id: arrears_at_notice_date
        label: "Arrears at the date of any Notice to Leave"
        inputType: currency
        width: half
      - id: arrears_items
        label: "Arrears schedule (periods, amounts due, payments made)"
        inputType: textarea
        helperText: "List each period, amount due, amount paid, and running balance."
        width: full
      - id: arrears_schedule_upload
        label: "Upload rent schedule / ledger"
        inputType: upload
        helperText: "Attach ledger or bank export to support the schedule."
        width: full
      - id: payment_attempts
        label: "Payment history and attempts to resolve"
        inputType: textarea
        helperText: "Describe reminders sent, payment plans offered, or any discussions."
        width: full
    suggestion_prompt: >
      Present arrears clearly with dates and amounts. Note any part-payments or agreed plans that were missed.
    maps_to:
      - arrears_total
      - arrears_at_notice_date
      - arrears_items
      - rent_schedule_uploaded
      - payment_attempts
    conditions: []

  # 7. Grounds / reasons for eviction
  - id: scotland_ground_codes
    section: Grounds
    question: "Which statutory grounds are you relying on?"
    inputType: multiselect
    options:
      - "Ground 1 - Landlord intends to sell (mandatory)"
      - "Ground 2 - Property to be sold by lender (mandatory)"
      - "Ground 3 - Landlord intends to refurbish (discretionary)"
      - "Ground 4 - Change of use (discretionary)"
      - "Ground 6 - Not an employee (mandatory)"
      - "Ground 7 - No longer providing care (mandatory)"
      - "Ground 8 - Not occupying let property (mandatory)"
      - "Ground 10 - Tenant in rent arrears (mandatory/discretionary)"
      - "Ground 11 - Tenant in breach of tenancy agreement (discretionary)"
      - "Ground 12 - Tenant engaged in relevant criminal or antisocial behaviour (mandatory/discretionary)"
      - "Ground 13 - Landlord/agent registration revoked (mandatory)"
      - "Ground 15 - HMO licence revoked (mandatory)"
      - "Ground 17 - Ceasing to be charity (discretionary)"
      - "Ground 18 - Family member to move in (mandatory)"
      - "Ground 19 - Tenancy linked to employment (mandatory)"
      - "Ground 20 - Local authority compulsory purchase (mandatory)"
      - "Ground 21 - Temporary social housing (mandatory)"
      - "Ground 22 - Property part of agricultural holding (mandatory)"
      - "Ground 23 - Property used for student accommodation (mandatory)"
      - "Ground 24 - Property used for supported accommodation (mandatory)"
    validation:
      required: true
    maps_to:
      - scotland_ground_codes
    conditions: []

  - id: scotland_ground_explanation
    section: Grounds
    question: "Explain how each ground applies"
    inputType: textarea
    helperText: "Link facts and evidence to each ground. Note whether grounds are mandatory or discretionary."
    validation:
      required: true
    suggestion_prompt: >
      Draft clear particulars for each selected ground with dates, amounts, and behaviour references.
    maps_to:
      - scotland_ground_explanation
      - notice_reason
    conditions: []

  # 8. Pre-action / attempts to resolve
  - id: pre_action_steps
    section: Pre-action steps
    question: "What have you done to resolve issues before applying?"
    inputType: group
    helperText: "Tribunal expects reasonable contact attempts, especially for rent arrears."
    fields:
      - id: pre_action_letters_sent
        label: "Have you sent warning letters or emails?"
        inputType: yes_no
        width: half
      - id: pre_action_meetings
        label: "Have you discussed issues with the tenant?"
        inputType: yes_no
        width: half
      - id: payment_plan_offered
        label: "Was a payment plan offered?"
        inputType: yes_no
        width: half
      - id: attempts_to_resolve_summary
        label: "Summary of steps taken"
        inputType: textarea
        helperText: "Outline contact attempts, support signposting, and any agreements."
        validation:
          required: true
        width: full
    suggestion_prompt: >
      Capture specific dates and outcomes of letters, calls, meetings, and any payment plans proposed.
    maps_to:
      - pre_action_letters_sent
      - pre_action_meetings
      - payment_plan_offered
      - attempts_to_resolve_summary
    conditions: []

  # 9. Tribunal application details
  - id: tribunal_details
    section: Tribunal
    question: "Tribunal preferences"
    inputType: group
    helperText: "Information needed for Form E and tribunal scheduling."
    fields:
      - id: court_name
        label: "Preferred hearing centre / Sheriffdom"
        inputType: text
        validation:
          required: true
        width: full
      - id: tribunal_preferred_hearing_type
        label: "Preferred hearing type"
        inputType: select
        options:
          - in_person
          - video
          - telephone
          - no_preference
        width: half
      - id: tribunal_special_arrangements
        label: "Any special arrangements needed?"
        inputType: textarea
        helperText: "E.g. interpreter, accessibility adjustments."
        width: full
    maps_to:
      - court_name
      - sheriffdom
      - tribunal_preferred_hearing_type
      - tribunal_special_arrangements
    conditions: []

  # 10. Previous proceedings
  - id: previous_proceedings
    section: Previous Proceedings
    question: "Have there been any previous tribunal or court proceedings about this tenancy?"
    inputType: yes_no
    validation:
      required: true
    maps_to:
      - previous_proceedings
    conditions: []

  - id: previous_proceedings_details
    section: Previous Proceedings
    question: "Provide details of any previous proceedings"
    inputType: textarea
    dependsOn:
      questionId: previous_proceedings
      value: "Yes"
    helperText: "Include dates, references, and outcomes."
    maps_to:
      - previous_proceedings_details
    conditions: []

  # 11. Evidence summary and uploads
  - id: evidence_summary
    section: Evidence
    question: "Evidence you will rely on"
    inputType: textarea
    helperText: "List key documents: tenancy agreement, arrears schedule, correspondence, photos, inspection reports."
    validation:
      required: true
    maps_to:
      - evidence_summary
    conditions: []

  - id: evidence_uploads
    section: Evidence
    question: "Upload supporting evidence"
    inputType: group
    fields:
      - id: scotland_evidence_tenancy_uploaded
        label: "Signed tenancy agreement"
        inputType: upload
        validation:
          required: true
        width: full
      - id: scotland_evidence_rent_schedule_uploaded
        label: "Rent schedule / ledger"
        inputType: upload
        validation:
          required: false
        width: full
      - id: scotland_evidence_messages_uploaded
        label: "Messages or letters to tenant"
        inputType: upload
        width: full
      - id: scotland_evidence_other_uploaded
        label: "Other evidence (photos, inspection reports, bank statements)"
        inputType: upload
        width: full
    maps_to:
      - scotland_evidence_tenancy_uploaded
      - scotland_evidence_rent_schedule_uploaded
      - scotland_evidence_messages_uploaded
      - scotland_evidence_other_uploaded
    conditions: []

  # 12. Service / contact details
  - id: service_contact
    section: Service & Contact
    question: "Service and contact preferences"
    inputType: group
    helperText: "Tell us how notices and tribunal correspondence should be served."
    fields:
      - id: service_name
        label: "Service contact name"
        inputType: text
        width: full
      - id: service_address_line1
        label: "Service address line 1"
        inputType: text
        width: full
      - id: service_address_line2
        label: "Service address line 2 (optional)"
        inputType: text
        width: full
      - id: service_city
        label: "Service town/city"
        inputType: text
        width: half
      - id: service_postcode
        label: "Service postcode"
        inputType: text
        width: half
      - id: service_method_preference
        label: "Preferred service method"
        inputType: select
        options:
          - recorded_delivery
          - by_hand
          - email_if_agreed
          - other
        width: half
      - id: service_email
        label: "Service email (if applicable)"
        inputType: email
        width: half
      - id: service_phone
        label: "Service phone"
        inputType: tel
        width: half
    maps_to:
      - service_name
      - service_address_line1
      - service_address_line2
      - service_city
      - service_postcode
      - service_method_preference
      - service_email
      - service_phone
    conditions: []

  # 13. Statement of truth / declaration
  - id: scotland_signatory_name
    section: Statement of Truth
    question: "Who will sign the application?"
    inputType: text
    validation:
      required: true
    maps_to:
      - scotland_signatory_name
      - signatory_name
    conditions: []

  - id: scotland_signature_date
    section: Statement of Truth
    question: "Signature date"
    inputType: date
    helperText: "Leave blank to default to today's date."
    maps_to:
      - scotland_signature_date
      - signature_date
    conditions: []
