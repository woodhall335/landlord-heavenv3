# Eviction Pack Audit

## Overview
- Scope: audit of eviction pack document generation (England & Wales and Scotland) against MQS mappings. Existing legal logic was not changed; this report only highlights wiring and mapping coverage.
- Inputs reviewed: eviction pack generators, official form fillers, case-fact schema/normalisation, and MQS configs for complete_pack and notice_only (England & Wales, Scotland).
- Key observation: generators use a relatively small subset of CaseFacts/WizardFacts (mainly names, addresses, tenancy start, rent, payment day, grounds particulars). Several form fields (especially Section 8 ground particulars and Scottish deposit/registration details) lack explicit MQS coverage or rely on loosely mapped text areas.

## England & Wales eviction – document-by-document mapping
| Document | Interface inputs | CaseFacts/WizardFacts path | MQS question(s) → `maps_to` | Notes |
| --- | --- | --- | --- | --- |
| Section 8 notice (Form) | `Section8NoticeData` fields used: landlord_full_name, landlord_address, tenant_full_name, property_address, tenancy_start_date, rent_amount, rent_frequency, payment_date, grounds[]. | parties.landlord.name/tenants[0].name from `landlord_full_name` / `tenant_full_name`; property.address_line1/line2/city/postcode from property_*; tenancy.start_date from `tenancy_start_date`; tenancy.rent_amount/frequency/payment_day from `rent_amount`/`rent_frequency`/`payment_date`; grounds particulars from free-text ground questions. | Landlord/Tenant details from **landlord_details** and **tenant_details** maps_to `landlord_full_name`, `landlord_address`, `tenant_full_name`, etc.【F:config/mqs/complete_pack/england-wales.yaml†L31-L93】【F:config/mqs/complete_pack/england-wales.yaml†L160-L221】 Property address via **property_details** → `property_address_line1/2`, `property_address_town`, `property_postcode` (normalised to property.address).【F:config/mqs/complete_pack/england-wales.yaml†L193-L221】 Tenancy start/rent/payment from **tenancy_details** (`tenancy_start_date`) and **rent_details** (`rent_amount`,`rent_frequency`,`payment_date`).【F:config/mqs/complete_pack/england-wales.yaml†L222-L273】 Grounds narratives from **rent_arrears_details**, **breach_details**, **damage_details**, **asb_details**, **ground17_details** etc. → `arrears_breakdown`, `tenancy_clause_breached`, `deterioration_description`, `incident_log`, `false_statement_description`.【F:config/mqs/complete_pack/england-wales.yaml†L294-L386】 | Section 8 generator does not consume many optional fields (e.g., breach warnings, ASB metadata), so surplus MQS fields include detailed ASB/police/council references. Ground codes/mandatory flags are constructed outside MQS; ensure grounding logic aligns with `section8_grounds` selection. |
| Section 21 / Form 6A | Uses `EvictionCase` directly (same base fields as above; triggered when `case_type === 'no_fault'`).【F:src/lib/documents/eviction-pack-generator.ts†L485-L502】 | Same as Section 8 for names/addresses; tenancy start and rent fields reused; notice type comes from case typing rather than explicit fact path. | No explicit MQS question sets `case_type`/no-fault flag; closest is **eviction_route** multi-select, but no `maps_to` to `case_type`/notice type → **MISSING**. Other required data covered by landlord/tenant/property/tenancy/rent questions above. | Missing explicit mapping for Section 21 notice date/expiry; notice-only pack also injects current date without MQS input. |
| N5 (claim) | `CaseData` fields from evictionCase: landlord_full_name/address/postcode/phone/email; solicitor_*; tenant_full_name; property_address/postcode; tenancy_start_date; rent_amount/frequency; signatory_name (landlord_full_name); signature_date (today); court_name; service contact override built from service_contact facts.【F:src/lib/documents/eviction-pack-generator.ts†L504-L565】【F:src/lib/documents/official-forms-filler.ts†L41-L110】 | parties.landlord.* from landlord question; solicitor_* from **solicitor_details** (`solicitor_firm`, `solicitor_address`, `solicitor_phone`, `solicitor_email`, `dx_number`).【F:config/mqs/complete_pack/england-wales.yaml†L95-L159】 Tenancy start/rent from tenancy/rent questions; service contact maps absent (no MQS question writes `service_*`). Court name only from free-text **court_and_fees.court_name** (present but not mapped to case facts).【F:config/mqs/complete_pack/england-wales.yaml†L464-L522】 | Court name/claimant reference/service contact are **MISSING** from MQS mappings to CaseFacts paths consumed by service_contact/court fields. Solicitor address is mapped, but evictionCase expects unified string; normalisation currently splits address lines, so concatenation logic unknown. |
| N119 (particulars) | Shares same `CaseData` object as N5; fillers additionally expect `ground_numbers`, `total_arrears`, `particulars_of_claim`, `section_8_notice_date`, but evictionCase->caseData does **not** supply them.【F:src/lib/documents/official-forms-filler.ts†L64-L82】【F:src/lib/documents/eviction-pack-generator.ts†L504-L565】 | `ground_numbers`/notice dates/arrears totals should come from issues.section8_grounds selections and arrears totals (`issues.rent_arrears.total_arrears`), but no mapping into evictionCase/CaseData is present → **MISSING**. `particulars_of_claim` captured from **case_overview** (maps_to `particulars_of_claim`).【F:config/mqs/complete_pack/england-wales.yaml†L18-L29】 | Major gaps: N119 will be largely blank on arrears/grounds due to missing evictionCase population and absent MQS→CaseFacts mapping for these CaseData fields. |

## Scotland eviction – document-by-document mapping
| Document | Interface inputs | CaseFacts/WizardFacts path | MQS question(s) → `maps_to` | Notes |
| --- | --- | --- | --- | --- |
| Notice to Leave | `ScotlandCaseData` fields used: landlord_full_name/address/postcode/phone/email/registration; tenant_full_name (+optional second); property_address/postcode; tenancy_start_date; rent_amount/frequency; notice_date (auto set); leaving_date (auto calc); grounds[].【F:src/lib/documents/scotland-forms-filler.ts†L20-L55】【F:src/lib/documents/scotland-forms-filler.ts†L186-L235】【F:src/lib/documents/eviction-pack-generator.ts†L594-L633】 | Landlord/Tenant/Property mappings from **landlord_details**, **tenant_details**, **property_details** in Scotland MQS mirror E&W identifiers (e.g., `landlord_full_name`, `tenant_full_name`, `property_address_line1`).【F:config/mqs/complete_pack/scotland.yaml†L31-L93】【F:config/mqs/complete_pack/scotland.yaml†L156-L217】 Tenancy/rent from **tenancy_details** and **rent_details** (`tenancy_start_date`, `rent_amount`, `rent_frequency`, `payment_date`).【F:config/mqs/complete_pack/scotland.yaml†L218-L277】 Grounds particulars drawn from Scotland-specific grounds questions (e.g., **scotland_notice_ground_details** → `ground_particulars`), but evictionCase expects pre-built `grounds` array; mapping path is not defined in case facts → **MISSING**. Landlord registration number captured via **landlord_registration** (`landlord_registration_number`).【F:config/mqs/complete_pack/scotland.yaml†L94-L121】 | Notice date/leaving date are auto-generated; no MQS entry for desired notice service date. Grounds array population is not wired from MQS, so Notice to Leave may lack ground codes/particulars. |
| Tribunal Form E | Uses same `ScotlandCaseData` as Notice to Leave plus deposit_amount/scheme/reference; uses notice_date/leaving_date for Notice to Leave fields.【F:src/lib/documents/scotland-forms-filler.ts†L244-L320】【F:src/lib/documents/eviction-pack-generator.ts†L594-L640】 | Deposit data expected from `deposit_amount`, `deposit_scheme`, `deposit_reference` (CaseFacts.tenancy.deposit_*). MQS Scotland collects `deposit_amount` and `deposit_protected` but not deposit scheme name/reference → **MISSING** for scheme/reference. Notice expiry (leaving_date) not collected. | Without grounds mapping, Form E checkboxes/particulars may be empty. Deposit scheme/reference not covered by MQS; landlord registration is mapped. |

## Gaps / missing fields
- **Case type / notice route**: No MQS `maps_to` populates `case_type`/`notice_type` or Section 21 trigger; generators rely on evictionCase.case_type manually set. (England & Wales notice-only and complete packs).
- **Section 8/N119 specifics**: `ground_numbers`, `total_arrears`, `section_8_notice_date`, `notice_expiry_date`, `arrears_breakdown`, and structured grounds arrays are not mapped into evictionCase/CaseData. MQS collects narratives but not numeric totals (total_arrears) or notice service dates for N119.
- **Service/court details**: Address-for-service override (`service_address_*`), court name, claimant reference are consumed by N5/N119 but lack MQS mappings into CaseFacts/evictionCase.
- **Deposit metadata**: England & Wales pack does not map `deposit_scheme_name`/`deposit_reference` (used in Section 8 data and Scotland mappings); Scotland MQS lacks scheme/reference for Form E.
- **Grounds array for Scotland**: No MQS `maps_to` builds `grounds` list with code/title/particulars; generators assume pre-built array.
- **Notice dates**: Notice to Leave and Section 21 use generated dates rather than MQS-provided service/expiry dates; no mapping exists for user-specified dates.

## Recommended changes (high-level, no code yet)
- Map eviction route selections to explicit `case_facts.notice.notice_type` / `evictionCase.case_type` so Section 21 vs Section 8 generation is data-driven.
- Capture and map ground selections and totals: add `maps_to` for `issues.section8_grounds.selected_grounds`, `issues.rent_arrears.total_arrears`, and notice service/expiry dates required by N119/Form E.
- Add service/court metadata questions mapping to `service_contact.*`, `court.court_name`, and `court.claimant_reference` to populate N5/N119 headers.
- Extend deposit questions to collect scheme name and reference (England & Wales and Scotland) mapped to `tenancy.deposit_scheme_name` and `deposit_reference` for Section 8/21 and Form E completeness.
- Introduce Scotland grounds mapping to a structured `grounds` array (code/title/particulars) aligned with eviction grounds JSON to feed Notice to Leave/Form E without manual assembly.
- Provide optional notice service date inputs (Section 21 and Notice to Leave) mapped to `notice.notice_date`/`notice.expiry_date` to avoid hardcoded “today” defaults.
